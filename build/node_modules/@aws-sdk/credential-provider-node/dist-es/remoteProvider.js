"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.remoteProvider = exports.ENV_IMDS_DISABLED = void 0;
var _credentialProviderImds = require("@smithy/credential-provider-imds");
var _propertyProvider = require("@smithy/property-provider");
const ENV_IMDS_DISABLED = exports.ENV_IMDS_DISABLED = "AWS_EC2_METADATA_DISABLED";
const remoteProvider = init => {
  if (process.env[_credentialProviderImds.ENV_CMDS_RELATIVE_URI] || process.env[_credentialProviderImds.ENV_CMDS_FULL_URI]) {
    return (0, _credentialProviderImds.fromContainerMetadata)(init);
  }
  if (process.env[ENV_IMDS_DISABLED]) {
    return async () => {
      throw new _propertyProvider.CredentialsProviderError("EC2 Instance Metadata Service access disabled");
    };
  }
  return (0, _credentialProviderImds.fromInstanceMetadata)(init);
};
exports.remoteProvider = remoteProvider;