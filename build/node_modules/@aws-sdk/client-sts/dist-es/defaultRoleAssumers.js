"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getDefaultRoleAssumerWithWebIdentity = exports.getDefaultRoleAssumer = exports.decorateDefaultCredentialProvider = void 0;
var _defaultStsRoleAssumers = require("./defaultStsRoleAssumers");
var _STSClient = require("./STSClient");
const getCustomizableStsClientCtor = (baseCtor, customizations) => {
  if (!customizations) return baseCtor;else return class CustomizableSTSClient extends baseCtor {
    constructor(config) {
      super(config);
      for (const customization of customizations) {
        this.middlewareStack.use(customization);
      }
    }
  };
};
const getDefaultRoleAssumer = (stsOptions = {}, stsPlugins) => (0, _defaultStsRoleAssumers.getDefaultRoleAssumer)(stsOptions, getCustomizableStsClientCtor(_STSClient.STSClient, stsPlugins));
exports.getDefaultRoleAssumer = getDefaultRoleAssumer;
const getDefaultRoleAssumerWithWebIdentity = (stsOptions = {}, stsPlugins) => (0, _defaultStsRoleAssumers.getDefaultRoleAssumerWithWebIdentity)(stsOptions, getCustomizableStsClientCtor(_STSClient.STSClient, stsPlugins));
exports.getDefaultRoleAssumerWithWebIdentity = getDefaultRoleAssumerWithWebIdentity;
const decorateDefaultCredentialProvider = provider => input => provider({
  roleAssumer: getDefaultRoleAssumer(input),
  roleAssumerWithWebIdentity: getDefaultRoleAssumerWithWebIdentity(input),
  ...input
});
exports.decorateDefaultCredentialProvider = decorateDefaultCredentialProvider;