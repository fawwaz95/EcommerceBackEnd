"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fromCognitoIdentity = fromCognitoIdentity;
var _clientCognitoIdentity = require("@aws-sdk/client-cognito-identity");
var _propertyProvider = require("@smithy/property-provider");
var _resolveLogins = require("./resolveLogins");
function fromCognitoIdentity(parameters) {
  return async () => {
    const {
      Credentials: {
        AccessKeyId = throwOnMissingAccessKeyId(),
        Expiration,
        SecretKey = throwOnMissingSecretKey(),
        SessionToken
      } = throwOnMissingCredentials()
    } = await parameters.client.send(new _clientCognitoIdentity.GetCredentialsForIdentityCommand({
      CustomRoleArn: parameters.customRoleArn,
      IdentityId: parameters.identityId,
      Logins: parameters.logins ? await (0, _resolveLogins.resolveLogins)(parameters.logins) : undefined
    }));
    return {
      identityId: parameters.identityId,
      accessKeyId: AccessKeyId,
      secretAccessKey: SecretKey,
      sessionToken: SessionToken,
      expiration: Expiration
    };
  };
}
function throwOnMissingAccessKeyId() {
  throw new _propertyProvider.CredentialsProviderError("Response from Amazon Cognito contained no access key ID");
}
function throwOnMissingCredentials() {
  throw new _propertyProvider.CredentialsProviderError("Response from Amazon Cognito contained no credentials");
}
function throwOnMissingSecretKey() {
  throw new _propertyProvider.CredentialsProviderError("Response from Amazon Cognito contained no secret key");
}