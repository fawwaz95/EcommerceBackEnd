"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fromEnv = exports.ENV_SESSION = exports.ENV_SECRET = exports.ENV_KEY = exports.ENV_EXPIRATION = void 0;
var _propertyProvider = require("@smithy/property-provider");
const ENV_KEY = exports.ENV_KEY = "AWS_ACCESS_KEY_ID";
const ENV_SECRET = exports.ENV_SECRET = "AWS_SECRET_ACCESS_KEY";
const ENV_SESSION = exports.ENV_SESSION = "AWS_SESSION_TOKEN";
const ENV_EXPIRATION = exports.ENV_EXPIRATION = "AWS_CREDENTIAL_EXPIRATION";
const fromEnv = () => async () => {
  const accessKeyId = process.env[ENV_KEY];
  const secretAccessKey = process.env[ENV_SECRET];
  const sessionToken = process.env[ENV_SESSION];
  const expiry = process.env[ENV_EXPIRATION];
  if (accessKeyId && secretAccessKey) {
    return {
      accessKeyId,
      secretAccessKey,
      ...(sessionToken && {
        sessionToken
      }),
      ...(expiry && {
        expiration: new Date(expiry)
      })
    };
  }
  throw new _propertyProvider.CredentialsProviderError("Unable to find environment variable credentials.");
};
exports.fromEnv = fromEnv;